# ALIYUN_SDK

## 概述

ALIYUN_SDK 基于阿里云的 ALINK 协议开发，用于 ESP-MESH 设备连接到阿里云物联网平台，帮助用户快速开发连接到阿里云的 ESP-MESH 产品。

## 组成

ALIYUN_SDK 由 2 部分组成，分别是 Gateway 和 subdevice

* Gateway: Gateway 的作用是代理子设备连接阿里云物联网平台，实现消息的转发。
* Subdevice: Subdevice 的作用是实现消息的处理。

> Gateway 和 Subdevice 体现的是程序的架构。对于网关设备，它将同时运行着 Gateway 和 Subdevice。

## Alink 协议已支持与未支持一览表功能

> 未支持的功能将在今后的版本中逐步支持

| 大类                   | 子类                       | 是否支持 |
|------------------------|----------------------------|----------|
| 设备身份注册           | 一机一密                   | ✔        |
| ^                      | 动态注册                   | ✘        |
| 管理拓扑关系           | 添加设备拓扑关系           | ✔        |
| ^                      | 删除设备拓扑关系           | ✔        |
| ^                      | 获取设备拓扑关系           | ✘        |
| ^                      | 发现设备列表上报           | ✘        |
| ^                      | 通知网关添加设备拓扑关系   | ✘        |
| ^                      | 通知网关拓扑关系变化       | ✘        |
| 子设备上下线           | 子设备上线                 | ✔        |
| ^                      | 子设备下线                 | ✔        |
| 设备属性、事件、服务   | 设备上报属性（透传）       | ✘        |
| ^                      | 设备上报属性（Alink JSON） | ✔        |
| ^                      | 设置设备属性（透传）       | ✘        |
| ^                      | 设置设备属性（Alink JSON） | ✔        |
| ^                      | 设备事件上报（透传）       | ✘        |
| ^                      | 设备事件上报（Alink JSON） | ✔        |
| ^                      | 设备服务调用（透传）       | ✘        |
| ^                      | 设备服务调用（Alink JSON） | ✔        |
| ^                      | 网关批量上报数据           | ✘        |
| ^                      | 物模型历史数据上报         | ✘        |
| 设备期望属性值         | 获取期望属性值             | ✔        |
| ^                      | 清空期望属性值             | ✔        |
| 子设备配置下发网关     | 配置下发                   | ✘        |
| 子设备禁用、启用、删除 | 禁用设备                   | ✔        |
| ^                      | 解除禁用                   | ✔        |
| ^                      | 删除设备                   | ✔        |
| 设备标签               | 标签信息上报               | ✔        |
| ^                      | 删除标签信息               | ✔        |
| TSL 模板               | 获取 TSL 模板              | ✔        |
| 固件升级               | 设备上报固件版本           | ✔        |
| ^                      | 物联网平台推送固件信息     | ✔        |
| ^                      | 设备上报升级进度           | ✔        |
| ^                      | 设备请求固件信息           | ✔        |
| 远程配置               | 设备主动请求配置信息       | ✔        |
| ^                      | 配置推送                   | ✔        |
| 设备网络状态           | 设备主动上报网络状态       | ✘        |
| 其他                   | NTP 服务                   | ✔        |

## 如何使用

参考 example/aliyun_linkkit 里的示例

## 已知 bug

1. 子设备推送 OTA 进度，只有 50 % 这个点会被真正推送到 Cloud
1. cJSON 未检查创建对象的返回值
